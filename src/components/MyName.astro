<div class="px-6 md:px-24 lg:px-48 xl:px-64 2xl:px-96 w-full h-screen flex flex-col items-start justify-center gap-8 py-8 my-48">
  <div class="flex flex-col">
    <span class="text-stone-600 text-lg md:text-xl lg:text-2xl">My name is</span>
    <div id="container"
         class="outfit flex gap-0 text-4xl mg:text-6xl lg:text-8xl tracking-tighter font-semibold text-wrap">
      <span id="name" class="text-stone-400"></span>
      <span id="underscore_" class="text-amber-500">_</span>
    </div>
  </div>

  <div class="text-stone-400 flex flex-col">
    <span>I'm a web developer who also designs<span class="text-amber-500">.</span></span>
    <span>My style is to keep it simple.</span>
    <span>Check out my <span class="text-amber-500">works</span> below!</span>
  </div>
</div>

<script>
  const under = document.getElementById('underscore_')
  const name = document.getElementById('name')
  const container = document.getElementById('container')

  const txt = 'Jan Albert Sobreo'
  let index = 0
  let text = []
  let typingInterval:any
  let blinkInterval:any

  // Function to start the typing animation
  const startTyping = () => {
    if (typingInterval) return; // Prevent multiple intervals
    typingInterval = setInterval(() => {
      if (!name || index >= txt.length) {
        clearInterval(typingInterval)
        return
      }
      text.push(txt.split('')[index])
      index++
      name.innerHTML = text.join('')
    }, 100)
  }

  // Function to start the blinking cursor
  const startBlinking = () => {
    if (blinkInterval) return; // Prevent multiple intervals
    blinkInterval = setInterval(() => {
      if (!under) return
      if (under.classList.contains('text-white/0')) {
        under.classList.remove('text-white/0')
      } else {
        under.classList.add('text-white/0')
      }
    }, 600)
  }

  // Create an Intersection Observer instance
  const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // If the element is in view, start the animations
        startTyping()
        startBlinking()
      } else {
        // If the element is out of view, stop the animations
        clearInterval(typingInterval)
        clearInterval(blinkInterval)
        typingInterval = null
        blinkInterval = null
      }
    })
  })

  // Start observing the container element
  if (container) {
    observer.observe(container)
  }
</script>
